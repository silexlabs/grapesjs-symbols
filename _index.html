<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Symbols for GrapesJS</title>
    <link href="https://unpkg.com/grapesjs/dist/css/grapes.min.css" rel="stylesheet">
    <script src="https://unpkg.com/grapesjs"></script>
    <link rel="stylesheet" href="https://grapesjs.com/stylesheets/grapesjs-preset-webpage.min.css">
    <script src="https://unpkg.com/grapesjs-preset-webpage"></script>
    <style>
      body,
      html {
        height: 100%;
        margin: 0;
      }
    </style>
  </head>
  <body>

    <div id='basic-actions' class="panel__basic-actions" style="z-index: 9; background: red;"></div>
    <div id="gjs" style="height:0px; overflow:hidden">
    </div>


    <script type="text/javascript">
      // Wait for the plugin to be injected by the dev server
      var idx = 0
      setTimeout(() => {
        window.editor = grapesjs.init({
          height: '100%',
          container: '#gjs',
          noticeOnUnload: false,
          plugins: [
            'grapesjs-preset-webpage',
            '@silexlabs/grapesjs-symbols',
          ],
          pluginsOpts: {
            'grapesjs-preset-webpage': {},
            '@silexlabs/grapesjs-symbols': {
              appendTo: '.gjs-pn-views-container',
            },
          },
        });
        editor.on('load', () => {
          editor.Panels.addPanel({
            id: 'basic-actions',
            el: '.panel__basic-actions',
            buttons: [
              {
                id: 'alert-button',
                className: 'btn-alert-button',
                label: 'Create symbol pink',
                command(editor) {
                  var label = prompt('Label', 'Symbol ' + ++idx)
                  var icon = prompt('Icon', 'fa-list')
                  editor.runCommand('symbols:add', { label, icon })
                }
              }, {
                id: 'alert-button2',
                className: 'btn-alert-button2',
                label: 'Create symbol green',
                command(editor) {
                  var label = prompt('Label', 'Symbol ' + ++idx)
                  var icon = prompt('Icon', 'fa-list')
                  editor.runCommand('symbols:add', { label, icon })
                }
              },
            ]
          });
        })
      }, 100);
    </script>
  </body>
</html>
